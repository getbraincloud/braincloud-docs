# Redemption Code




A redemption code is a special code associated with a product that gives the user that redeems it additional benefits within the product.  Codes may be digital-only, or printed upon physical cards and sold separately at retail.

<%= data.branding.productName %>'s Redemption Code feature supports two very different types of redemption code campaigns:

- **Shared codes [NEW!]** - these are sort of a shared coupon code system. The same shared code can be redeemed by _multiple_ people (once each). Also known as 'multi-use' codes.

- **Personal codes** - these are the sort of individualized codes that you might find in a Happy Meal or as a gift card. Each code is _unique_ - and can only be redeemed by a _single_ user. Also known oas 'single-use' codes.

Note that due to the history of this API - the concept of _Campaign_ in the Design Portal is represented by the `codeType` _argument_ and _fields_ in the API itself. There is also a new `codeUseType` field that represents the difference between Personal campaigns (`codeUseType: "SINGLE"`) and Shared campaigns (`codeUseType: "MULTI"`). 


Shared Redemption Codes
-----------------------

Shared redemption code _types_ (referred to as _Campaigns_ in the portal) can be created via the Design Portal, or programmatically via the <code>[SysAddMultiUseCodeType](/api/capi/redemptioncode/sysaddmultiusercodetype)<code> API call.

Shared Redemption Codes go through a separate instance of the following state machine for each user that attempts to redeem them:

![Shared Redemption Code States](@site/docs/img/api-img/redemption_code_shared_code_states_5_2.png)

The following operations are available from the client API:

- <code>[RedeemCode](/api/capi/redemptioncode/redeemcode)</code> – redeem a code
- <code>[RetrieveRedeemedCodes](/api/capi/redemptioncode/getredeemedcodes)</code> – returns a list of codes that have already been redeemed by this user.

Note that the above methods are available for use in Personal Redemption Code campaigns as well.


Personal Redemption Codes
-------------------------

To run a Personal Code campaign - devs must generate a set of unique codes and distribute them to individual users. Codes can be generated by the developer (and added to the system via the AddCode() API call) - or generated via the Design Portal.

![Personal Redemption Code States](@site/docs/img/api-img/redemption_code_personal_code_states_5_2.png)

At any time, a personal redemption code is in one of six states:

State | Description
--------- | -----------
Inactive | The code has been datafilled in the system, but is not ready to be redeemed. This is useful for retail cards that must be "activated" upon purchase, before they will be ready to be redeemed.  [i.e. prevents theft]
Available | A code datafilled into the system, and ready to be redeemed
InProgress | An asynchronous type code is being asynchronously redeemed and is still within the allowed processing time
Redeemed | A code that has already been redeemed. It will contain information about the user that redeemed it.
Invalid | A code that has been invalidated for some reason. [i.e. if a set of retail cards have been stolen, it would make sense for the retailer to invalidate those cards]
Failed | Redeeming this code has failed. Note that if retry attempts is set to > 0, it is possible to move from this state back to InProgress.

There are two ways to add to the redemption code inventory:

1. Use the "Generate New Codes..." function on the Design Portal. The Portal will generate random codes and provide a link to download those codes.
2. Call the [<code>AddCode</code>](/api/s2s/redemptioncode/addcode) method on the <%= data.branding.productName %> Server-to-Server interface. The API allows you to add a single code at a time.

Besides redeeming codes, two additional methods are available for Personal Redemption Codes via the Server-to-Server API:

- `ActivateCode( <scanCode>, <codeType>, <customCodeInfo> )` – activate a inactive code (i.e. make it available for redemption)
- `InvalidateCode ( <scanCode>, <codeType>, <invalidationReason> )` – invalidate a lost or stole (or otherwise fraudulent) code


### Management and Support Operations

The web portal offers a few handy management and support operations:

- App > Design > Marketplace > Redemption Codes
  - Manage the list of Redemption Code campaigns
  - Generate new codes for Personal campaigns
- App > Global > Marketplace > Redemption Codes
  - View the up-to-date status of a Redemption Code campaign
  - View a list of recent redemption attempts 
- App > User > Marketplace > Redemption Codes
  - View the list of codes that have been redeemed by the selected user

<DocCardList />